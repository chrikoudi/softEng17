<div class="background_image">
    <app-header></app-header>
    <div class="container">
        <div class="row">
            <div class="card" id="search_id">
                <div class="row mb-1"></div>
                <h4 class="search-title">Αναζήτηση</h4>
                <div class="row mb-2"></div>
                <div class="input-group">
                    <input #searchBox type="text" class="form-control" autocomplete="on" placeholder="Είδος, περιοχή, ηλικία" [(ngModel)] = "searchQuery.searchTerms"/>
                    <button class="btn btn-link" type="button" id="go" (click)="search()">Βρες!</button>
                </div>
                <div class="row mb-2"></div>
                <div class="row">
                    <div class="col-12 col-lg-7 position">
                        <h5>Τοποθεσία</h5>
                        <form *ngIf="!show">
                            <button type="button" class="btn btn-info btn-sm" (click) = "onClickLocationH(loc[0])">{{loc[0]}}</button>
                            &nbsp;
                            <button type="button" class="btn btn-info btn-sm" (click) = "onClickLocationHandler(loc[1])">{{loc[1]}}</button>
                        </form>
                        <form *ngIf="show">
                            <div class="input-group">
                                <input #searchBox type="text" class="form-control" id="define" placeholder="Ορισμός τοποθεσίας" (keyup.enter)="location_search(searchBox.value)"/>
                                <button class="btn btn-link" type="button" id="back1" (click)="location_search(searchBox.value)">Enter</button>
                                <button class="btn btn-link" type="button" id="back" (click)="back()">Πίσω</button>
                            </div>
                        </form>
                    </div>

                    <div class="col-12 col-lg-5 distance">
                        <h5>Απόσταση</h5>
                        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group mr-2" role="group" aria-label="First group">
                                <button type="button" class="btn btn-info btn-sm" (click) = "onClickDistanceHandler(dis[0])">< {{dis[0]}}</button>
                                <button type="button" class="btn btn-info btn-sm" (click) = "onClickDistanceHandler(dis[1])">< {{dis[1]}}</button>
                                <button type="button" class="btn btn-info btn-sm" (click) = "onClickDistanceHandler(dis[2])">< {{dis[2]}}</button>
                                <button type="button" class="btn btn-info btn-sm" (click) = "onClickDistanceHandler(dis[3])">< {{dis[3]}}</button>
                                <button type="button" class="btn btn-info btn-sm" (click) = "onClickDistanceHandler(dis[4])">< {{dis[4]}}</button>                            
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mb-2"></div>
            </div>
        </div>

        <div class="row">
            <div class="tabs">
              <div class="row mb-3"></div>
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="btn btn-info" type="button" (click)="list()" style="background-color:White;">Λίστα</a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-info" type="button" (click)="map()" style="background-color:lightblue;">Χάρτης</a>
                    </li>
                </ul>
                <div class="row mb-3"></div>
            </div>
        </div>

        <div class="row">
          <div class="card col-12 col-lg-3" id="filters_id">
            <div class="row mb-2"></div>
            <h4 class="filters-title">Φίλτρα</h4>
            <br>
            <h5 class="filter">Είδος</h5>
            <br>
            <div class="form-group" id="menu">
                <select class="custom-select" (change)="selectTypeHandler($event)">
                    <option *ngFor="let option of types" 
                        [value]="option"> 
                        {{ option }}
                     </option>
                </select>
            </div>
            <br>
            <br>
            <h5 class="filter">Ηλικία</h5>
            <br>
            <div class="form-group" id="menu">
                <select class="custom-select" (change)="selectAgeHandler($event)">
                    <option *ngFor="let option of ages" 
                        [value]="option"> 
                        {{ option }}
                     </option>
                </select>
            </div>
            <br>
            <br>
            <h5 class="filter">Ημερομηνία</h5>
            <br>
            <div class="form-group" id="menu">
                <select class="custom-select" (change)="selectDateHandler($event)">
                    <option *ngFor="let option of dates" 
                        [value]="option"> 
                        {{ option }}
                     </option>
                </select>
            </div>
            <br>
            <br>
            <h5 class="filter">Τιμή</h5>
            <br>
            <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups" id="price">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                    <button type="button" class="btn btn-info" (click) = "onClickPriceHandler(num[0])">< {{num[0]}}</button>
                    <button type="button" class="btn btn-info" (click) = "onClickPriceHandler(num[1])">< {{num[1]}}</button>
                    <button type="button" class="btn btn-info" (click) = "onClickPriceHandler(num[2])">< {{num[2]}}</button>
                    <button type="button" class="btn btn-info" (click) = "onClickPriceHandler(num[3])">< {{num[3]}}</button>
                    <button type="button" class="btn btn-info" (click) = "onClickPriceHandler(num[4])">< {{num[4]}}</button>
                </div>
            </div>
            <br>
            <br>
            <h5 class="filter">Φύλο</h5>
            <br>
            <div class="input-group" id="sex">
                <button type="button" class="btn btn-info" (click) = "onClickSexHandler(sex[0])">{{sex[0]}}</button>
                &nbsp; &nbsp;
                <button type="button" class="btn btn-info" (click) = "onClickSexHandler(sex[1])">{{sex[1]}}</button>
            </div>
            <div class="row mb-2"></div>
            <div class="input-group" id="submit">
                <button type="button" class="btn btn-secondary" (click) = "onClick()">Επιλογή</button>
            </div>
            <div class="row mb-2"></div>
          </div>

          <div class="col-12 col-lg-9 list_results">
            <form *ngIf="!show_map">
                <li *ngFor="let ev of results | async | paginate: { itemsPerPage: 4, currentPage: p }" class="row card">
                    <img class="card-img-top" id="image" src="{{ev.image}}" alt="Card image">
                    <h4 class="card-title" id="title">{{ev.title}}</h4>
                    <p class="card-text" id="text">{{ev.shortDescription}}</p>
                    <a routerLink="/results/{{ev._id}}" class="btn btn-primary btn-sm" id="button">Προβολή</a>
                </li>
                <pagination-controls (pageChange)="p = $event"></pagination-controls>
            </form>
            <form *ngIf="show_map">
                <agm-map [latitude]="searchQuery.geo.lat" [longitude]="searchQuery.geo.lon" [zoom]="(18 - searchQuery.distance * 0.4) ">
                    <div *ngFor="let ev of results | async">
                        <agm-marker 
                            [latitude]="ev.geo.lat" 
                            [longitude]="ev.geo.lon" 
                            (mouseOver)="onMouseOver(infoWindow,gm)">

                            <agm-info-window [disableAutoPan]="false" #infoWindow>
                                <div>
                                    <h4>{{ev.title}}</h4>
                                    <p>{{ev.shortDescription}}</p>
                                    <img id="info" src="{{ev.image}}">
                                </div>
                                <div>
                                    <a (click)="onClickInfoView({id:ev._id})"></a>
                                </div>
                            </agm-info-window>
                        </agm-marker>
                    </div> 
                </agm-map>
            </form>
          </div>
        </div>
    </div>
</div>
<app-footer></app-footer>